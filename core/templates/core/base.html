{% load static %}

<!DOCTYPE html>
<html lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Dragonfly</title>
        <link rel="stylesheet" href="{% static 'core/base.css' %}"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <div class="navbar">
            <div class="nav-left">
                <div style="display: flex; flex-direction: row;">
                    <b style="color: #FFFFFF;">Dragonfly</b>
                </div>
            </div>
            <div class="nav-right">
                <input id="issue-input" type="text" style="height: 20px; width: 60px;" placeholder="Issue #"/>
                <button id="issue-button" style="margin-left: 5px; height: 26px" onclick="gotoSelectedIssue();">Go</button>
            </div>
        </div>
        <div class="actionbar">
            <a class="action" style="color: #212121; text-decoration: none;" href="{% url 'issues' %}">View Issues</a>
            <a class="action" style="color: #212121; text-decoration: none;" href="{% url 'create_project' %}">Create Project</a>
            <a class="action" style="color: #212121; text-decoration: none;" href="{% url 'create_issue' %}">Create Issue</a>
        </div>
        <div class="main">
            {% block content %}
            {% endblock %}
        </div>
    </body>
</html>

<script>
    function gotoSelectedIssue() {
        let issueId = document.getElementById("issue-input").value;
        window.location.href = "/issue/" + issueId;
    }

    markdown_elements = document.getElementsByClassName("markdown");
    for(let i=0; i < markdown_elements.length; i++) {
        console.log(markdown_elements[i]);
        markdown_elements[i].innerHTML = marked(markdown_elements[i].innerHTML);
    }
</script>